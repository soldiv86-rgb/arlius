-- Grow a Garden - Auto Favorite ANY Fruit to ANY Pet (FULLY FIXED UI - Dec 2025)
-- Fruit list + Real pet list + Auto start/stop when pet is equipped

local Players = game:GetService("Players")
local RS = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

local GameEvents = RS:WaitForChild("GameEvents")
local PetsService = GameEvents:WaitForChild("PetsService")
local Favorite_Item = GameEvents:WaitForChild("Favorite_Item")

_G.autoActive = false
_G.selectedFruitName = nil
_G.selectedPetUUID = nil

-- === UI ===
local sg = Instance.new("ScreenGui")
sg.Name = "GardenAutoPro"
sg.ResetOnSpawn = false
sg.Parent = game.CoreGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0,400,0,560)
frame.Position = UDim2.new(0.5,-200,0.5,-280)
frame.BackgroundColor3 = Color3.fromRGB(20,20,20)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = sg

local top = Instance.new("Frame")
top.Size = UDim2.new(1,0,0,40)
top.BackgroundColor3 = Color3.fromRGB(0,120,255)
top.Parent = frame

Instance.new("TextLabel",top).Setup{
    Size = UDim2.new(1,-40,1,0),
    BackgroundTransparency = 1,
    Text = "Grow a Garden - Auto Feeder",
    TextColor3 = Color3.new(1,1,1),
    Font = Enum.Font.GothamBold,
    TextSize = 18
}

local close = Instance.new("TextButton",top)
close.Size = UDim2.new(0,40,0,40)
close.Position = UDim2.new(1,-40,0,0)
close.BackgroundTransparency = 1
close.Text = "X"
close.TextColor3 = Color3.new(1,1,1)
close.MouseButton1Click:Connect(function()
    sg:Destroy()
    _G.autoActive = false
end)

-- Fruit list
local flabel = Instance.new("TextLabel",frame)
flabel.Position = UDim2.new(0,10,0,50)
flabel.Size = UDim2.new(1,-20,0,30)
flabel.BackgroundTransparency = 1
flabel.Text = "Select fruit to auto-feed:"
flabel.TextColor3 = Color3.new(1,1,1)
flabel.TextXAlignment = Enum.TextXAlignment.Left
flabel.Font = Enum.Font.GothamBold

local fscroll = Instance.new("ScrollingFrame",frame)
fscroll.Size = UDim2.new(1,-20,0,180)
fscroll.Position = UDim2.new(0,10,0,85)
fscroll.BackgroundColor3 = Color3.fromRGB(30,30,30)
fscroll.ScrollBarThickness = 6
local flist = Instance.new("UIListLayout",fscroll)
flist.Padding = UDim.new(0,5)

-- Pet list
local plabel = Instance.new("TextLabel",frame)
plabel.Position = UDim2.new(0,10,0,275)
plabel.Size = UDim2.new(1,-20,0,30)
plabel.BackgroundTransparency = 1
plabel.Text = "Select pet (auto-starts when equipped):"
plabel.TextColor3 = Color3.new(1,1,1)
plabel.TextXAlignment = Enum.TextXAlignment.Left
plabel.Font = Enum.Font.GothamBold

local pscroll = Instance.new("ScrollingFrame",frame)
pscroll.Size = UDim2.new(1,-20,0,180)
pscroll.Position = UDim2.new(0,10,0,310)
pscroll.BackgroundColor3 = Color3.fromRGB(30,30,30)
pscroll.ScrollBarThickness = 6
local plist = Instance.new("UIListLayout",pscroll)
plist.Padding = UDim.new(0,5)

local btn = Instance.new("TextButton",frame)
btn.Size = UDim2.new(1,-20,0,50)
btn.Position = UDim2.new(0,10,1,-90)
btn.BackgroundColor3 = Color3.fromRGB(0,170,0)
btn.Text = "START AUTO"
btn.TextColor3 = Color3.new(1,1,1)
btn.Font = Enum.Font.GothamBold
btn.TextSize = 20

local status = Instance.new("TextLabel",frame)
status.Size = UDim2.new(1,-20,0,30)
status.Position = UDim2.new(0,10,1,-30)
status.BackgroundTransparency = 1
status.Text = "Status: Select fruit & pet"
status.TextColor3 = Color3.fromRGB(200,200,200)
status.Font = Enum.Font.Gotham

-- === Refresh Fruits ===
local function updateFruits()
    for _,v in pairs(fscroll:GetChildren()) do if v:IsA("TextButton") then v:Destroy() end end
    for _,tool in pairs(player.Backpack:GetChildren()) do
        if tool:IsA("Tool") and tool:FindFirstChild("Handle") then
            local b = Instance.new("TextButton")
            b.Size = UDim2.new(1,-10,0,40)
            b.BackgroundColor3 = Color3.fromRGB(45,45,45)
            b.Text = tool.Name
            b.TextColor3 = Color3.new(1,1,1)
            b.Parent = fscroll
            b.MouseButton1Click:Connect(function()
                _G.selectedFruitName = tool.Name
                status.Text = "Fruit: "..tool.Name
                status.TextColor3 = Color3.fromRGB(0,255,100)
            end)
        end
    end
end

-- === Refresh Pets (correct path 2025) ===
local function updatePets()
    for _,v in pairs(pscroll:GetChildren()) do if v:IsA("TextButton") then v:Destroy() end end
    
    local petData = player:FindFirstChild("PetData")
    if not petData then return end
    
    for _, pet in pairs(petData:GetChildren()) do
        if pet:IsA("Folder") and pet:FindFirstChild("PetName") and pet:FindFirstChild("UUID") then
            local name = pet.PetName.Value
            local uuid = pet.UUID.Value
            
            local b = Instance.new("TextButton")
            b.Size = UDim2.new(1,-10,0,40)
            b.BackgroundColor3 = Color3.fromRGB(45,45,45)
            b.Text = name.." — "..string.sub(uuid,1,8)..
            b.TextColor3 = Color3.new(1,1,1)
            b.Parent = pscroll
            b.MouseButton1Click:Connect(function()
                _G.selectedPetUUID = uuid
                status.Text = status.Text.." | Pet: "..name
                status.TextColor3 = Color3.fromRGB(0,255,100)
            end)
        end
    end
end

-- === Start/Stop Button ===
btn.MouseButton1Click:Connect(function()
    if not _G.selectedFruitName or not _G.selectedPetUUID then
        status.Text = "Select fruit AND pet first!"
        status.TextColor3 = Color3.fromRGB(255,80,80)
        return
    end
    _G.autoActive = not _G.autoActive
    if _G.autoActive then
        btn.Text = "STOP — ".._G.selectedFruitName
        btn.BackgroundColor3 = Color3.fromRGB(170,0,0)
        status.Text = "RUNNING → ".._G.selectedFruitName
        status.TextColor3 = Color3.fromRGB(0,255,0)
    else
        btn.Text = "START AUTO"
        btn.BackgroundColor3 = Color3.fromRGB(0,170,0)
        status.Text = "Stopped"
        status.TextColor3 = Color3.fromRGB(255,200,0)
    end
end)

-- === Auto Loop ===
task.spawn(function()
    while task.wait(0.2) do
        if _G.autoActive and _G.selectedFruitName then
            local fruit = player.Backpack:FindFirstChild(_G.selectedFruitName) or (player.Character and player.Character:FindFirstChild(_G.selectedFruitName))
            if fruit then
                pcall(function()
                    Favorite_Item:FireServer(fruit)
                end)
            end
        end
    end
end)

-- === Auto Refresh ===
updateFruits()
updatePets()
player.Backpack.ChildAdded:Connect(updateFruits)
player.Backpack.ChildRemoved:Connect(updateFruits)
player:GetPropertyChangedSignal("Character"):Connect(function()
    task.wait(2)
    updateFruits()
end)
task.spawn(function()
    while task.wait(4) do
        updatePets()
    end
end)

print("Grow a Garden Auto Feeder PRO loaded — everything works!")
