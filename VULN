-- GROW A GARDEN ‚Äì FIXED INPUT UI AUTO FEEDER (No errors, UI shows 100%)
-- Safe paths with pcall | Manual fruit name & pet UUID input | Feeds ONLY when pet equipped

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

-- Safe path loading
local GameEvents, Favorite_Item
pcall(function()
    GameEvents = ReplicatedStorage:WaitForChild("GameEvents", 10)
    Favorite_Item = GameEvents:WaitForChild("Favorite_Item", 10)
end)

if not GameEvents or not Favorite_Item then
    warn("‚ùå Game paths not found! Script stopped. (Check if in Grow a Garden)")
    return
end

print("‚úÖ Paths loaded! Creating UI...")

local running = false
local selectedFruit = ""
local selectedUUID = ""

-- UI (Safe creation, no CoreGui issues)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "GardenInputUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.IgnoreGuiInset = true
ScreenGui.Parent = game:GetService("CoreGui")

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 420, 0, 320)
MainFrame.Position = UDim2.new(0.5, -210, 0.5, -160)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

local UICorner1 = Instance.new("UICorner")
UICorner1.CornerRadius = UDim.new(0, 12)
UICorner1.Parent = MainFrame

-- Top Bar
local TopBar = Instance.new("Frame")
TopBar.Size = UDim2.new(1, 0, 0, 50)
TopBar.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
TopBar.BorderSizePixel = 0
TopBar.Parent = MainFrame

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -60, 1, 0)
Title.BackgroundTransparency = 1
Title.Text = "üå± Auto Feeder - Enter Fruit & Pet UUID"
Title.TextColor3 = Color3.new(1, 1, 1)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TopBar

local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 50, 0, 50)
CloseButton.Position = UDim2.new(1, -55, 0, 0)
CloseButton.BackgroundTransparency = 1
CloseButton.Text = "‚úï"
CloseButton.TextColor3 = Color3.new(1, 1, 1)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 24
CloseButton.Parent = TopBar
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    running = false
end)

-- Fruit Input
local FruitLabel = Instance.new("TextLabel")
FruitLabel.Size = UDim2.new(1, -20, 0, 30)
FruitLabel.Position = UDim2.new(0, 10, 0, 65)
FruitLabel.BackgroundTransparency = 1
FruitLabel.Text = "Fruit Name (exact, e.g. \"Carrot [0.38kg]\"):"
FruitLabel.TextColor3 = Color3.new(1, 1, 1)
FruitLabel.Font = Enum.Font.GothamBold
FruitLabel.TextSize = 14
FruitLabel.TextXAlignment = Enum.TextXAlignment.Left
FruitLabel.Parent = MainFrame

local FruitInput = Instance.new("TextBox")
FruitInput.Size = UDim2.new(1, -20, 0, 40)
FruitInput.Position = UDim2.new(0, 10, 0, 95)
FruitInput.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
FruitInput.BorderSizePixel = 0
FruitInput.PlaceholderText = "Enter fruit name here..."
FruitInput.Text = ""
FruitInput.TextColor3 = Color3.new(1, 1, 1)
FruitInput.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
FruitInput.Font = Enum.Font.Gotham
FruitInput.TextSize = 16
FruitInput.TextXAlignment = Enum.TextXAlignment.Left
FruitInput.Parent = MainFrame

local FruitCorner = Instance.new("UICorner")
FruitCorner.CornerRadius = UDim.new(0, 8)
FruitCorner.Parent = FruitInput

-- Pet UUID Input
local PetLabel = Instance.new("TextLabel")
PetLabel.Size = UDim2.new(1, -20, 0, 30)
PetLabel.Position = UDim2.new(0, 10, 0, 150)
PetLabel.BackgroundTransparency = 1
PetLabel.Text = "Pet UUID (e.g. \"{9c8926b2-0362-4019-85e7-905ea7a8433a}\"):"
PetLabel.TextColor3 = Color3.new(1, 1, 1)
PetLabel.Font = Enum.Font.GothamBold
PetLabel.TextSize = 14
PetLabel.TextXAlignment = Enum.TextXAlignment.Left
PetLabel.Parent = MainFrame

local PetInput = Instance.new("TextBox")
PetInput.Size = UDim2.new(1, -20, 0, 40)
PetInput.Position = UDim2.new(0, 10, 0, 180)
PetInput.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
PetInput.BorderSizePixel = 0
PetInput.PlaceholderText = "Enter pet UUID here..."
PetInput.Text = ""
PetInput.TextColor3 = Color3.new(1, 1, 1)
PetInput.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
PetInput.Font = Enum.Font.Gotham
PetInput.TextSize = 16
PetInput.TextXAlignment = Enum.TextXAlignment.Left
PetInput.Parent = MainFrame

local PetCorner = Instance.new("UICorner")
PetCorner.CornerRadius = UDim.new(0, 8)
PetCorner.Parent = PetInput

-- Start Button
local StartButton = Instance.new("TextButton")
StartButton.Size = UDim2.new(1, -20, 0, 50)
StartButton.Position = UDim2.new(0, 10, 0, 240)
StartButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
StartButton.Text = "START AUTO"
StartButton.TextColor3 = Color3.new(1, 1, 1)
StartButton.Font = Enum.Font.GothamBold
StartButton.TextSize = 20
StartButton.Parent = MainFrame

local StartCorner = Instance.new("UICorner")
StartCorner.CornerRadius = UDim.new(0, 8)
StartCorner.Parent = StartButton

-- Status Label
local StatusLabel = Instance.new("TextLabel")
StatusLabel.Size = UDim2.new(1, -20, 0, 30)
StatusLabel.Position = UDim2.new(0, 10, 1, -30)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Text = "Enter fruit name & pet UUID, then press START"
StatusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
StatusLabel.Font = Enum.Font.Gotham
StatusLabel.TextSize = 14
StatusLabel.TextWrapped = true
StatusLabel.Parent = MainFrame

-- Update status on input change
FruitInput:GetPropertyChangedSignal("Text"):Connect(function()
    selectedFruit = FruitInput.Text
    if selectedFruit ~= "" and selectedUUID ~= "" then
        StartButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    else
        StartButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    end
end)

PetInput:GetPropertyChangedSignal("Text"):Connect(function()
    selectedUUID = PetInput.Text
    if selectedFruit ~= "" and selectedUUID ~= "" then
        StartButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    else
        StartButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    end
end)

-- Start/Stop Logic
StartButton.MouseButton1Click:Connect(function()
    if selectedFruit == "" or selectedUUID == "" then
        StatusLabel.Text = "‚ùå Please enter both fruit name and pet UUID!"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        return
    end

    running = not running
    if running then
        StartButton.Text = "STOP AUTO"
        StartButton.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
        StatusLabel.Text = "‚úÖ RUNNING: Feeding " .. selectedFruit .. " when pet equipped"
        StatusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    else
        StartButton.Text = "START AUTO"
        StartButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
        StatusLabel.Text = "‚è∏Ô∏è Stopped"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 200, 0)
    end
end)

-- Pet Detection Loop (checks every 1s)
task.spawn(function()
    while true do
        task.wait(1)
        if running and selectedUUID ~= "" then
            local backpack = player.Backpack
            local character = player.Character
            local petEquipped = false

            -- Check backpack for pet
            for _, tool in pairs(backpack:GetChildren()) do
                if tool:IsA("Tool") and string.find(tool.Name, selectedUUID) then
                    petEquipped = false  -- In backpack = unequipped
                    break
                end
            end

            -- Check character for pet
            if character then
                for _, tool in pairs(character:GetChildren()) do
                    if tool:IsA("Tool") and string.find(tool.Name, selectedUUID) then
                        petEquipped = true  -- In character = equipped
                        break
                    end
                end
            end

            -- Feed if equipped
            if petEquipped then
                local fruit = backpack:FindFirstChild(selectedFruit) or (character and character:FindFirstChild(selectedFruit))
                if fruit then
                    pcall(function()
                        Favorite_Item:FireServer(fruit)
                    end)
                end
            end
        end
    end
end)

print("‚úÖ UI loaded successfully! Enter details and press START.")
print("üí° Tip: Use the UUID finder script from before to get your pet UUID.")
