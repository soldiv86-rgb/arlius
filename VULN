-- Pet-Triggered Auto Carrot Favoriter (Execute this ONCE)
-- Starts auto-favoriting carrots IMMEDIATELY AFTER equipping the specific pet
-- Stops ONLY when unequipping that same pet
-- Works even if you equip/unequip via GUI or your original scripts!

local mt = getrawmetatable(game)
local old_namecall = mt.__namecall
setreadonly(mt, false)

mt.__namecall = newcclosure(function(self, ...)
    local args = {...}
    local method = getnamecallmethod()
    
    if method == "FireServer" and 
       self == game:GetService("ReplicatedStorage").GameEvents.PetsService and
       typeof(args[1]) == "string" then
        
        if args[1] == "EquipPet" and 
           args[2] == "{9c8926b2-0362-4019-85e7-905ea7a8433a}" then
            _G.auto = true
            print("ðŸŸ¢ Auto Carrot Favoriter STARTED! (Pet equipped)")
            
        elseif args[1] == "UnequipPet" and 
               args[2] == "{9c8926b2-0362-4019-85e7-905ea7a8433a}" then
            _G.auto = false
            print("ðŸ”´ Auto Carrot Favoriter STOPPED! (Pet unequipped)")
        end
    end
    
    return old_namecall(self, ...)
end)

setreadonly(mt, true)

-- Infinite loop that only acts when _G.auto == true
task.spawn(function()
    while true do
        if _G.auto then
            local player = game.Players.LocalPlayer
            local carrot = player.Backpack:FindFirstChild("Carrot [0.38kg]") 
                        or (player.Character and player.Character:FindFirstChild("Carrot [0.38kg]"))
            
            if carrot then
                game.ReplicatedStorage.GameEvents.Favorite_Item:FireServer(carrot)
            end
        end
        task.wait(0.2)  -- Set to 0.2 as requested
    end
end)

print("âœ… Pet-Triggered Auto Carrot Favoriter LOADED! (0.2s loop)")
print("ðŸ’¡ Equip pet {9c8926b2-0362-4019-85e7-905ea7a8433a} to START | Unequip to STOP")
print("ðŸ’¡ Works with GUI, your scripts, or anything! No need to modify them.")
